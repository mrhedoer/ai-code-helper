-- we don't know how to generate root <with-no-name> (class Root) :(

grant select on performance_schema.* to 'mysql.session'@localhost;

grant trigger on sys.* to 'mysql.sys'@localhost;

grant audit_abort_exempt, firewall_exempt, select, system_user on *.* to 'mysql.infoschema'@localhost;

grant audit_abort_exempt, authentication_policy_admin, backup_admin, clone_admin, connection_admin, firewall_exempt, persist_ro_variables_admin, session_variables_admin, shutdown, super, system_user, system_variables_admin on *.* to 'mysql.session'@localhost;

grant audit_abort_exempt, firewall_exempt, system_user on *.* to 'mysql.sys'@localhost;

grant alter, alter routine, application_password_admin, audit_abort_exempt, audit_admin, authentication_policy_admin, backup_admin, binlog_admin, binlog_encryption_admin, clone_admin, connection_admin, create, create role, create routine, create tablespace, create temporary tables, create user, create view, delete, drop, drop role, encryption_key_admin, event, execute, file, firewall_exempt, flush_optimizer_costs, flush_status, flush_tables, flush_user_resources, group_replication_admin, group_replication_stream, index, innodb_redo_log_archive, innodb_redo_log_enable, insert, lock tables, passwordless_user_admin, persist_ro_variables_admin, process, references, reload, replication client, replication slave, replication_applier, replication_slave_admin, resource_group_admin, resource_group_user, role_admin, select, sensitive_variables_observer, service_connection_admin, session_variables_admin, set_user_id, show databases, show view, show_routine, shutdown, super, system_user, system_variables_admin, table_encryption_admin, telemetry_log_admin, trigger, update, xa_recover_admin, grant option on *.* to root@localhost;

create table chat_message
(
    id              bigint auto_increment
        primary key,
    conversation_id varchar(255)                        not null,
    message_content text                                null,
    message_type    varchar(255)                        null,
    created_at      timestamp default CURRENT_TIMESTAMP null
);
create table users
(
    id          bigint auto_increment
        primary key,
    username    varchar(255)                        not null,
    password    varchar(255)                        not null,
    email       varchar(255)                        null,
    created_at  timestamp default CURRENT_TIMESTAMP null,
    constraint uk_username unique (username),
    constraint uk_email unique (email)
);

-- 面试题库表
create table interview_questions
(
    id       bigint auto_increment
        primary key,
    category varchar(255)  not null,
    question varchar(1000) not null
);

-- 初始化面试题数据
INSERT INTO interview_questions (category, question) VALUES
('java', '1. 什么是面向对象编程？请说明其三大特性。'),
('java', '2. Java中的==和equals()有什么区别？'),
('java', '3. 什么是Java中的多态？请举例说明。'),
('java', '4. String、StringBuilder和StringBuffer的区别是什么？'),
('java', '5. Java中的final关键字有哪些用法？'),
('java', '6. 什么是Java的垃圾回收机制？'),
('java', '7. ArrayList和LinkedList的区别是什么？'),
('java', '8. HashMap的底层实现原理是什么？'),
('java', '9. 什么是线程安全？如何实现线程安全？'),
('java', '10. synchronized和Lock的区别是什么？'),
('redis', '1. Redis支持哪些数据类型？'),
('redis', '2. Redis的持久化机制有哪些？RDB和AOF的区别是什么？'),
('redis', '3. 什么是Redis的缓存穿透、缓存击穿和缓存雪崩？如何解决？'),
('redis', '4. Redis如何实现分布式锁？'),
('redis', '5. Redis的过期策略有哪些？'),
('redis', '6. Redis集群模式有哪些？主从复制的原理是什么？'),
('redis', '7. Redis的单线程模型为什么还能支持高并发？'),
('redis', '8. Redis的事务机制是怎样的？'),
('redis', '9. 如何保证Redis和数据库的数据一致性？'),
('redis', '10. Redis的哨兵模式是什么？有什么作用？'),
('mysql', '1. 什么是索引？MySQL有哪些类型的索引？'),
('mysql', '2. 什么是B+树？为什么MySQL使用B+树作为索引？'),
('mysql', '3. 什么是事务？ACID特性分别是什么？'),
('mysql', '4. MySQL的隔离级别有哪些？分别解决了什么问题？'),
('mysql', '5. 什么是死锁？如何避免死锁？'),
('mysql', '6. explain关键字有什么作用？如何使用？'),
('mysql', '7. 什么是慢查询？如何优化慢查询？'),
('mysql', '8. InnoDB和MyISAM的区别是什么？'),
('mysql', '9. 什么是主从复制？复制的原理是什么？'),
('mysql', '10. 如何进行分库分表？'),
('spring', '1. 什么是IoC和DI？它们有什么区别？'),
('spring', '2. Spring Bean的生命周期是怎样的？'),
('spring', '3. Spring中有哪些Bean的作用域？'),
('spring', '4. 什么是AOP？AOP的应用场景有哪些？'),
('spring', '5. Spring的事务管理是如何实现的？'),
('spring', '6. @Autowired和@Resource的区别是什么？'),
('spring', '7. Spring Boot的自动配置原理是什么？'),
('spring', '8. 什么是循环依赖？Spring如何解决循环依赖？'),
('spring', '9. Spring MVC的工作流程是怎样的？'),
('spring', '10. Spring中的设计模式有哪些？'),
('多线程', '1. 进程和线程的区别是什么？'),
('多线程', '2. 如何创建线程？有哪些方式？'),
('多线程', '3. 什么是线程池？线程池的核心参数有哪些？'),
('多线程', '4. volatile关键字的作用是什么？'),
('多线程', '5. 什么是happens-before原则？'),
('多线程', '6. CAS是什么？有什么优缺点？'),
('多线程', '7. ThreadLocal是什么？有什么应用场景？'),
('多线程', '8. 什么是死锁？如何避免死锁？'),
('多线程', '9. CountDownLatch、CyclicBarrier和Semaphore的区别是什么？'),
('多线程', '10. Java并发包中的常用类有哪些？'),
('jvm', '1. JVM的内存结构是怎样的？'),
('jvm', '2. 什么是类加载机制？类加载的过程是怎样的？'),
('jvm', '3. 什么是双亲委派模型？为什么要使用双亲委派模型？'),
('jvm', '4. 垃圾回收算法有哪些？'),
('jvm', '5. 常见的垃圾收集器有哪些？它们的特点是什么？'),
('jvm', '6. 什么是内存泄漏和内存溢出？有什么区别？'),
('jvm', '7. 如何进行JVM调优？'),
('jvm', '8. Full GC什么时候会触发？'),
('jvm', '9. 什么是逃逸分析？'),
('jvm', '10. JVM的参数有哪些？如何配置？');